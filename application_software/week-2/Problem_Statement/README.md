
# Problem Statement

Write two ”CPP” socket programs, client.cpp and server.cpp, that communicate together using TCP. Multiple clients send user provided messages to the server and the server simply replies the same messages back to the respective clients.
1. server.cpp will spawn N (given as its input parameter) threads in the begining of its execution.
2. server will also maintain of queue of socket file descriptors. Every new request will be added to the queue after suitable locking and after addition, it will signal a worker thread sleeping to wake up and process it.
3. Each thread generated by the server will sleep if the queue is empty. If signalled by the server, it will pop a socket descriptor from the front of the queue (ofcourse this step requires suitable locking), reads the message from the socket and sends the same message back to the client.
4. Client simply sends a message to the server and waits for its reply. After receiving the reply, it termminates. 

You have been provided with the simple single threaded **server** and **client** programs present in this folder, you need to modify the server code and make it multithreaded. Familarise yourself with the functions used in the programs given and understand the logic.

You may want to look at [Before You Begin](Before_You_Begin/README.md) section for more details.


## Implementation of step 1 (Thread Creation)

You need to go through the Thread Creation Tutorial given in [Before You Begin](../Before_You_Begin/README.md) Section and familiarise yourself with pthread_create() and pthread_join() functions.


## Implementation of step 2 (Queueing and Pthread Synchronization)

You should be familiar with the implementation of Queue in cpp. The following cpp [reference](https://www.cplusplus.com/reference/queue/queue/) may help. For the conditional variables, Go through the Pthraed Synchronization Tutorial given in [Before You Begin](../Before_You_Begin/README.md) Section.


The client and server must both be on the same machine. The programs should take command line arguments as shown below.

./client <client_port> <server_port> <N>
./server <server_port> <client_port>



## Compilation Instructions

```g++ client.cpp -o client -pthread```

```g++ server.cpp -o server -pthread```